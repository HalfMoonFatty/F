Design memcache

设计一个memcache，实现读，写，和删除操作；用什么样的data structure，eviction rule是什么，怎样最大程度避免segmentation，如何handle concurrency。
都是基于一个server的情况考虑，没有问distributed 的infrastructure如何设计。


多谢！ 有篇论文叫scaling memcached at FB, 里面有一小段讲的是single machine bottleneck. 我浅读过一下，根据我的理解，single machine bottleneck可能有:
1. 只用single thread.. . Waral 鍗氬鏈夋洿澶氭枃绔�,
2. 用multi-thread的话得用fine-grain locking, 类似java的concurrent hashmap, 意思就是多线程的时候不要整个memory都lock, lock一个slab就好
3. multi-threading 配合一个memory slab allocator(一个专门的manger来管理memory)
4. Evict LRU 以及在slab上的处理(给个slab都有LRU). 涓€浜�-涓夊垎-鍦帮紝鐙鍙戝竷
5. Use UDP for get() instead of TCP(网络bottleneck)
6. request 太多的话 可能需要专门batch一下再发packet出去(网络bottleneck). 




System design POI




Design twitter feed system




Tiny URL





问了typeAhead，虽然之前准备过，大的架构答得还行，但是问了几个具体的问题，答得很不好所以估计要挂。
这些具体的问题还是值得思考一下的，我给大家列一下，希望能帮到后面的人：
1. top n hot key word怎么生成，问了下map reduce的东西 
2. typeAhead这里的hot key words考虑多久的时效性，比如你是按照1 month，1 week，1 day 还是1 hour的数据给出hot key words。
3. 大家都知道要用Trie去存数据，并且Trie是放在cache里的，那么这个cache什么时候去更新？怎么更新？要不要加TTL？你更新的这个cache的频率会对用户query的时效性产生很大的影响，并且你更新也会对数据库和服务器造成额外的负担，你怎么去平衡。
4. 最后加了一个问题说如果这个服务是面向多个国家的，过了一段时间你发现你的推荐在某些国家点击率很高，有些国家点击率很低，你要怎么优化。
总之都和你之前的一系列答案有关。问得相当的细。



CS基础问题：输入www.facebook.com到browser，按回车之后，会发生什么。 coding: LC8 Given an input char array, convert it to integer.




用什么样的数据结构存 social graph相关的信息；然后花了很长时间问了如何在一个server上面处理大量的读写并发，读的量远远大于写；




music app，选出 top 10 songs




download all urls from 1000 hosts. Imagine all the urls are graph.
Requirement: Each host has bad internet connection among each other, Has to download url exacly once.




设计一个单机的KV缓存




设计一个FB的搜索系统， 自我感觉讨论不错， 然并卵 
从requriment开始： 要搜索什么？ people,post, event ....
constraint ， 用户多少，数据多少之类；. from: 1point3acres.com/bbs 
UI 怎么搞， 怎样提高用户体验， typehead, 不同label分类
总体怎么设计， 前段， server， 数据，画一画.鐣欏璁哄潧-涓€浜�-涓夊垎鍦�
workflow 怎样，写个流程， 一个请求怎么完成 
webservice怎么设计？ API， operation是怎么定义， 把restful讲讲
数据库， 搜索的数据结构都怎么存，SQL table啦，还有 trie啦， bloom filter 啦， inverted table都讲讲。  
CAP那一套说一说，怎么balance， 怎么Partion， 怎么保证consistence, cache怎么存-g



